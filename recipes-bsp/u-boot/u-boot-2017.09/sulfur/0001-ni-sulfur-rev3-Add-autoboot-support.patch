From 1cf145a2ec62b3570b6746393fdba6931ea7575d Mon Sep 17 00:00:00 2001
From: Moritz Fischer <moritz.fischer@ettus.com>
Date: Mon, 12 Jun 2017 23:26:17 -0700
Subject: [PATCH] ni: sulfur-rev3: Add autoboot support

Signed-off-by: Moritz Fischer <moritz.fischer@ettus.com>
---
 configs/ni_sulfur_rev3_defconfig | 4 ++++
 include/configs/zynq-common.h    | 5 +++++
 2 files changed, 9 insertions(+)

diff --git a/configs/ni_sulfur_rev3_defconfig b/configs/ni_sulfur_rev3_defconfig
index 42bb18e..a7cd75f 100644
--- a/configs/ni_sulfur_rev3_defconfig
+++ b/configs/ni_sulfur_rev3_defconfig
@@ -66,3 +66,7 @@ CONFIG_G_DNL_MANUFACTURER="National Instruments Inc"
 CONFIG_G_DNL_VENDOR_NUM=0x3923
 CONFIG_G_DNL_PRODUCT_NUM=0x0301
 CONFIG_TPM=y
+CONFIG_AUTOBOOT_KEYED=y
+CONFIG_AUTOBOOT_PROMPT="autobooting in %d seconds...\nType <stop> to stop or <delay> to delay\n"
+CONFIG_AUTOBOOT_STOP_STR="stop"
+CONFIG_AUTOBOOT_DELAY_STR="delay"
diff --git a/include/configs/zynq-common.h b/include/configs/zynq-common.h
index 2fe6897..8f7afa7 100644
--- a/include/configs/zynq-common.h
+++ b/include/configs/zynq-common.h
@@ -359,4 +359,9 @@
 
 #define CONFIG_SYS_UBOOT_START	CONFIG_SYS_TEXT_BASE
 
+#define CONFIG_BOOT_RETRY_TIME 10
+#define CONFIG_RESET_TO_RETRY
+
+
+
 #endif /* __CONFIG_ZYNQ_COMMON_H */
-- 
2.7.4

